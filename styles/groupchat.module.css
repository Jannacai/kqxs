/* Modern Chat Component Design - Thiết kế mới với màu sắc hài hòa */
.chatContainer {
	max-width: 100%;
	margin: 0 auto;
	background: var(--forum-bg-primary);
	border-radius: var(--forum-radius-2xl);
	box-shadow: var(--forum-shadow-lg);
	display: flex;
	flex-direction: column;
	font-family: var(--font-sans);
	height: 600px;
	width: 930px;
	overflow: hidden;
	border: 1px solid var(--forum-border-color);
	transition: all 0.3s ease;
}

.chatContainer:hover {
	box-shadow: var(--forum-shadow-xl);
	transform: translateY(-2px);
}

.chatTitle {
	font-size: var(--text-xl);
	font-weight: 700;
	padding: var(--space-6);
	background: var(--forum-primary-color);
	color: white;
	text-align: center;
	border-bottom: 1px solid var(--forum-border-color);
	position: relative;
}

.chatTitle::after {
	content: '';
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	height: 2px;
	background: linear-gradient(
		90deg,
		var(--forum-success-color),
		var(--forum-warning-color)
	);
}

.messagesContainer {
	flex: 1;
	overflow-y: auto;
	padding: var(--space-6);
	background: var(--forum-bg-secondary);
	display: flex;
	flex-direction: column;
	gap: var(--space-4);
	position: relative;
	scrollbar-width: thin;
	scrollbar-color: var(--forum-primary-color) var(--forum-bg-tertiary);
}

.messagesContainer::-webkit-scrollbar {
	width: 6px;
}

.messagesContainer::-webkit-scrollbar-track {
	background: var(--forum-bg-tertiary);
	border-radius: var(--forum-radius-sm);
}

.messagesContainer::-webkit-scrollbar-thumb {
	background: var(--forum-primary-color);
	border-radius: var(--forum-radius-sm);
}

.messagesContainer::-webkit-scrollbar-thumb:hover {
	background: var(--forum-primary-dark);
}

.messageWrapper {
	display: flex;
	align-items: flex-start;
	position: relative;
	gap: var(--space-3);
	max-width: 100%;
	padding: var(--space-3);
	border-radius: var(--forum-radius-lg);
	background: var(--forum-bg-primary);
	box-shadow: var(--forum-shadow-sm);
	transition: all 0.2s ease;
	border: 1px solid var(--forum-border-color);
}

.messageWrapper:hover {
	box-shadow: var(--forum-shadow-md);
	transform: translateY(-1px);
}

.ownMessage {
	flex-direction: row-reverse;
	background: var(--forum-primary-light);
	border-left: 3px solid var(--forum-primary-color);
}

.avatar {
	width: 48px;
	height: 48px;
	border-radius: 50%;
	overflow: hidden;
	flex-shrink: 0;
	cursor: pointer;
	transition: transform 0.2s ease;
	border: 2px solid var(--forum-border-color);
}

.avatar:hover {
	transform: scale(1.05);
}

.avatarImage {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.avatarInitials {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--forum-primary-color);
	color: white;
	font-weight: 600;
	font-size: 1.125rem;
}

.messageContent {
	flex: 1;
	min-width: 0;
	display: flex;
	flex-direction: column;
	gap: var(--space-2);
}

.messageHeader {
	display: flex;
	align-items: center;
	gap: var(--space-3);
	flex-wrap: wrap;
}

.username {
	font-weight: 600;
	color: var(--forum-text-primary);
	font-size: 0.875rem;
	cursor: pointer;
	transition: color 0.2s ease;
}

.username:hover {
	color: var(--forum-primary-color);
}

.username.user {
	color: var(--forum-text-primary);
}

.username.admin {
	color: var(--forum-danger-color);
}

.role {
	font-size: 0.75rem;
	padding: 2px 8px;
	border-radius: var(--forum-radius-sm);
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.05em;
}

.role.user {
	background: var(--forum-bg-tertiary);
	color: var(--forum-text-secondary);
}

.role.admin {
	background: var(--forum-danger-color);
	color: white;
}

.timestamp {
	font-size: 0.75rem;
	color: var(--forum-text-muted);
	margin-left: auto;
}

.messageText {
	font-size: 0.875rem;
	line-height: 1.5;
	color: var(--forum-text-primary);
	word-wrap: break-word;
	white-space: pre-wrap;
	margin: 0;
}

.ownMessage .messageText {
	color: var(--forum-text-primary);
}

.noMessages {
	text-align: center;
	color: var(--forum-text-secondary);
	font-style: italic;
	padding: var(--space-8);
}

.inputForm {
	background: var(--forum-bg-primary);
	border-top: 1px solid var(--forum-border-color);
	padding: var(--space-4);
	display: flex;
	gap: var(--space-3);
	align-items: flex-end;
}

.inputWrapper {
	flex: 1;
	position: relative;
}

.input {
	width: 100%;
	min-height: 44px;
	padding: var(--space-3) var(--space-4);
	border: 2px solid var(--forum-border-color);
	border-radius: var(--forum-radius-lg);
	font-size: 0.875rem;
	font-family: inherit;
	resize: vertical;
	transition: all 0.2s ease;
	background: var(--forum-bg-primary);
	color: var(--forum-text-primary);
}

.input:focus {
	outline: none;
	border-color: var(--forum-primary-color);
	box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.1);
}

.charCount {
	position: absolute;
	bottom: -20px;
	right: 0;
	font-size: 0.75rem;
	color: var(--forum-text-muted);
}

.sendButton {
	padding: var(--space-3) var(--space-4);
	background: var(--forum-primary-color);
	color: white;
	border: none;
	border-radius: var(--forum-radius-lg);
	font-weight: 600;
	font-size: 0.875rem;
	cursor: pointer;
	transition: all 0.2s ease;
	display: flex;
	align-items: center;
	gap: var(--space-2);
}

.sendButton:hover {
	background: var(--forum-primary-dark);
	transform: translateY(-1px);
}

.sendButton:disabled {
	background: var(--forum-text-muted);
	cursor: not-allowed;
	transform: none;
}

.loginPrompt {
	text-align: center;
	padding: var(--space-6);
	color: var(--forum-text-secondary);
}

.loginButton {
	display: inline-block;
	margin-top: var(--space-3);
	padding: var(--space-3) var(--space-6);
	background: var(--forum-primary-color);
	color: white;
	text-decoration: none;
	border-radius: var(--forum-radius-lg);
	font-weight: 600;
	transition: all 0.2s ease;
}

.loginButton:hover {
	background: var(--forum-primary-dark);
	transform: translateY(-1px);
}

.error {
	background: var(--forum-danger-color);
	color: white;
	padding: var(--space-4);
	border-radius: var(--forum-radius-lg);
	margin: var(--space-4);
	text-align: center;
	font-weight: 500;
}

/* Modal Styles */
.modalOverlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.5);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 1000;
	backdrop-filter: blur(4px);
}

.modal {
	background: var(--forum-bg-primary);
	border-radius: var(--forum-radius-xl);
	box-shadow: var(--forum-shadow-xl);
	max-width: 400px;
	width: 90%;
	max-height: 80vh;
	overflow-y: auto;
	position: relative;
	animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
	from {
		opacity: 0;
		transform: translateY(-20px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.closeButton {
	position: absolute;
	top: var(--space-4);
	right: var(--space-4);
	background: none;
	border: none;
	font-size: 1.5rem;
	color: var(--forum-text-secondary);
	cursor: pointer;
	padding: var(--space-1);
	border-radius: var(--forum-radius-sm);
	transition: all 0.2s ease;
}

.closeButton:hover {
	background: var(--forum-bg-tertiary);
	color: var(--forum-text-primary);
}

.modalContent {
	padding: var(--space-6);
}

.modalAvatar {
	width: 80px;
	height: 80px;
	border-radius: 50%;
	overflow: hidden;
	margin: 0 auto var(--space-4);
	border: 3px solid var(--forum-primary-color);
}

.modalAvatarImage {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.modalAvatarInitials {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--forum-primary-color);
	color: white;
	font-weight: 700;
	font-size: 2rem;
}

.modalUsername {
	font-size: 1.25rem;
	font-weight: 700;
	color: var(--forum-text-primary);
	text-align: center;
	margin-bottom: var(--space-2);
}

.modalRole {
	text-align: center;
	margin-bottom: var(--space-4);
}

.modalRole.user {
	color: var(--forum-text-secondary);
}

.modalRole.admin {
	color: var(--forum-danger-color);
	font-weight: 600;
}

.modalDetail {
	font-size: 0.875rem;
	color: var(--forum-text-secondary);
	line-height: 1.5;
}

/* Context Menu */
.contextMenu {
	position: absolute;
	background: var(--forum-bg-primary);
	border: 1px solid var(--forum-border-color);
	border-radius: var(--forum-radius-lg);
	box-shadow: var(--forum-shadow-lg);
	padding: var(--space-2);
	z-index: 100;
	min-width: 150px;
	animation: fadeIn 0.2s ease-out;
}

@keyframes fadeIn {
	from {
		opacity: 0;
		transform: scale(0.95);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}

.contextMenuItem {
	padding: var(--space-2) var(--space-3);
	border-radius: var(--forum-radius-sm);
	cursor: pointer;
	font-size: 0.875rem;
	color: var(--forum-text-primary);
	transition: all 0.2s ease;
}

.contextMenuItem:hover {
	background: var(--forum-bg-secondary);
	color: var(--forum-primary-color);
}

/* Responsive Design */
@media (max-width: 1024px) {
	.chatContainer {
		width: 100%;
		height: 500px;
	}
}

@media (max-width: 768px) {
	.chatContainer {
		height: 400px;
		border-radius: var(--forum-radius-lg);
	}

	.chatTitle {
		font-size: var(--text-lg);
		padding: var(--space-4);
	}

	.messagesContainer {
		padding: var(--space-4);
	}

	.messageWrapper {
		padding: var(--space-2);
	}

	.avatar {
		width: 40px;
		height: 40px;
	}

	.avatarInitials {
		font-size: 1rem;
	}

	.username {
		font-size: 0.8rem;
	}

	.messageText {
		font-size: 0.8rem;
	}

	.inputForm {
		padding: var(--space-3);
	}

	.input {
		font-size: 0.8rem;
	}

	.sendButton {
		font-size: 0.8rem;
	}

	.modal {
		width: 95%;
	}

	.modalAvatar {
		width: 60px;
		height: 60px;
	}

	.modalAvatarInitials {
		font-size: 1.5rem;
	}

	.modalUsername {
		font-size: 1.125rem;
	}
}

@media (max-width: 480px) {
	.chatContainer {
		height: 350px;
	}

	.messageWrapper {
		flex-direction: column;
		gap: var(--space-2);
	}

	.ownMessage {
		flex-direction: column;
	}

	.messageHeader {
		flex-direction: column;
		align-items: flex-start;
		gap: var(--space-1);
	}

	.timestamp {
		margin-left: 0;
	}

	.inputForm {
		flex-direction: column;
		gap: var(--space-2);
	}

	.sendButton {
		width: 100%;
		justify-content: center;
	}
}

/* Dark Mode Support */
@media (prefers-color-scheme: dark) {
	.chatContainer {
		background: var(--forum-bg-dark);
		border-color: var(--forum-border-color);
	}

	.chatTitle {
		background: var(--forum-primary-dark);
		border-bottom-color: var(--forum-border-color);
	}

	.messagesContainer {
		background: var(--forum-bg-dark);
	}

	.messageWrapper {
		background: var(--forum-bg-dark);
		border-color: var(--forum-border-color);
	}

	.ownMessage {
		background: rgba(74, 222, 128, 0.1);
	}

	.messageText {
		color: var(--forum-text-light);
	}

	.ownMessage .messageText {
		color: var(--forum-text-light);
	}

	.inputForm {
		background: var(--forum-bg-dark);
		border-top-color: var(--forum-border-color);
	}

	.input {
		background: var(--forum-bg-dark);
		color: var(--forum-text-light);
		border-color: var(--forum-border-color);
	}

	.username {
		color: var(--forum-text-light);
	}

	.username:hover {
		color: var(--forum-primary-light);
	}

	.modal {
		background: var(--forum-bg-dark);
	}

	.modalUsername {
		color: var(--forum-text-light);
	}

	.modalDetail {
		color: var(--forum-text-secondary);
	}

	.contextMenu {
		background: var(--forum-bg-dark);
		border-color: var(--forum-border-color);
	}

	.contextMenuItem {
		color: var(--forum-text-light);
	}

	.contextMenuItem:hover {
		background: var(--forum-bg-tertiary);
		color: var(--forum-primary-light);
	}
}
